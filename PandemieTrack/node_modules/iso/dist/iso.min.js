!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Iso=e():t.Iso=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var u=n[r]={exports:{},id:r,loaded:!1};return t[r].call(u.exports,u,u.exports,e),u.loaded=!0,u.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),a=r(o),c="data-iso-key",f={markup:function(){function t(t,e){return t?"<div "+c+'="'+String(e)+'">'+String(t)+"</div>":""}return t}(),data:function(){function t(t,e){return t?'<script type="application/json" '+c+'="'+String(e)+'">'+String(t)+"</script>":""}return t}()},d=function(){var t=document.querySelectorAll("["+c+"]");return Array.prototype.reduce.call(t,function(t,e){var n=e.getAttribute(c);if(t[n]||(t[n]={}),"SCRIPT"===e.nodeName)try{var r=JSON.parse(a["default"].decode(e.innerHTML));t[n].state=r}catch(u){t[n].state={}}else t[n].node=e;return t},{})},l=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],n=arguments.length<=1||void 0===arguments[1]?f:arguments[1];u(this,t),this.name=e,this.renderer=n,this.html=[],this.data=[]}return i(t,[{key:"add",value:function(){function t(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=a["default"].encode(JSON.stringify(e));return this.html.push(t),this.data.push(n),this}return t}()},{key:"render",value:function(){function t(){return a["default"].server(this.html,this.data,this.renderer,this.name)}return t}()}],[{key:"render",value:function(){function e(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?"":arguments[2],u=arguments.length<=3||void 0===arguments[3]?f:arguments[3];return new t(r,u).add(e,n).render()}return e}()},{key:"bootstrap",value:function(){function t(t){var e=arguments.length<=1||void 0===arguments[1]?d:arguments[1];return a["default"].client(t,e)}return t}()}]),t}();e["default"]=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/</g,r=/>/g,u=/&lt;/g,i=/&gt;/g,o=/[<>]/,a=/&lt;|&gt;/,c=function(t){return t?String(t):""};e["default"]={encode:function(){function t(t){var e=c(t);return o.test(e)?e.replace(n,"&lt;").replace(r,"&gt;"):e}return t}(),decode:function(){function t(t){var e=c(t);return a.test(e)?e.replace(u,"<").replace(i,">"):e}return t}(),server:function(){function t(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?"":arguments[3],u=t.reduce(function(t,e,u){var i=String(r)+"_"+String(u);return t+n.markup(e,i,r)},""),i=e.reduce(function(t,e,u){var i=String(r)+"_"+String(u);return t+n.data(e,i,r)},"");return String(u)+"\n"+String(i)}return t}(),client:function(){function t(t,e){if(t){var n=e();Object.keys(n).forEach(function(e){var r=n[e],u=r.state,i=r.node;t(u,i,e)})}}return t}()}}])});